{% extends "base.html" %}

{% block title %}{{ channel_name }} - AI Summaries - YouTube Deep Search{% endblock %}

{% block content %}
    <div style="margin-bottom: 20px;">
        <h2 style="margin: 0; display: flex; align-items: center; gap: 10px;">
            ü§ñ AI Summaries from 
            <span style="color: #007bff;">{{ channel_name }}</span>
        </h2>
        <p style="margin: 5px 0 0 0; color: #666; font-size: 14px;">{{ total_videos }} video{{ 's' if total_videos != 1 else '' }} with AI summaries</p>
    </div>
    
    <!-- Navigation -->
    <div style="margin-bottom: 20px; display: flex; gap: 10px;">
        <a href="/storage" style="background: #6c757d; color: white; padding: 8px 16px; text-decoration: none; border-radius: 4px; font-size: 14px;">‚Üê Back to Storage</a>
        <a href="https://www.youtube.com/results?search_query={{ channel_name|urlencode }}" target="_blank" style="background: #ff0000; color: white; padding: 8px 16px; text-decoration: none; border-radius: 4px; font-size: 14px;">üì∫ View on YouTube</a>
    </div>
    
    <!-- Summaries List -->
    <div style="display: flex; flex-direction: column; gap: 30px;">
        {% for video in videos_with_summaries %}
            <div class="summary-card" style="background: white; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1); border-left: 4px solid #28a745;">
                <!-- Video Header -->
                <div style="background: #f8f9fa; padding: 15px; border-bottom: 1px solid #eee;">
                    <div style="display: flex; gap: 15px;">
                        <div style="flex-shrink: 0;">
                            <img src="{{ video.thumbnail_url or 'https://img.youtube.com/vi/' + video.video_id + '/maxresdefault.jpg' }}" 
                                 alt="Thumbnail" 
                                 style="width: 120px; height: 68px; object-fit: cover; border-radius: 4px;"
                                 onerror="this.src='https://img.youtube.com/vi/{{ video.video_id }}/default.jpg'">
                        </div>
                        <div style="flex-grow: 1; min-width: 0;">
                            <h3 style="margin: 0 0 8px 0; font-size: 18px; line-height: 1.3;">
                                <a href="/watch?v={{ video.video_id }}" style="color: #333; text-decoration: none;">{{ video.title }}</a>
                            </h3>
                            <div style="color: #666; font-size: 14px; margin-bottom: 8px;">
                                üì∫ {{ video.uploader }}
                                {% if video.duration %}
                                    ‚Ä¢ ‚è±Ô∏è {{ "%.0f"|format(video.duration // 60) }}:{{ "%02.0f"|format(video.duration % 60) }}
                                {% endif %}
                            </div>
                            <div style="color: #888; font-size: 12px;">
                                ü§ñ Summary generated {{ video.summary_age_hours }}h ago using {{ video.model_used }}
                            </div>
                        </div>
                        <div style="flex-shrink: 0; display: flex; flex-direction: column; gap: 8px;">
                            <a href="/watch?v={{ video.video_id }}" style="background: #007bff; color: white; padding: 6px 12px; text-decoration: none; border-radius: 4px; font-size: 12px; text-align: center;">View Full</a>
                            <a href="https://www.youtube.com/watch?v={{ video.video_id }}" target="_blank" style="background: #ff0000; color: white; padding: 6px 12px; text-decoration: none; border-radius: 4px; font-size: 12px; text-align: center;">YouTube</a>
                        </div>
                    </div>
                </div>
                
                <!-- AI Summary -->
                <div style="padding: 20px;">
                    <div style="background: #f0f8ff; border-left: 4px solid #007bff; padding: 15px; border-radius: 4px;">
                        <div style="white-space: pre-wrap; line-height: 1.6; color: #333;">{{ video.summary_text }}</div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
    
    <!-- Footer Navigation -->
    <div style="margin-top: 40px; text-align: center;">
        <a href="/storage" style="background: #6c757d; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px;">‚Üê Back to All Videos</a>
    </div>
    
    <style>
        .summary-card:hover {
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            transition: box-shadow 0.2s ease;
        }
        
        .summary-card h3 a:hover {
            color: #007bff;
            transition: color 0.2s ease;
        }
    </style>

{% endblock %}